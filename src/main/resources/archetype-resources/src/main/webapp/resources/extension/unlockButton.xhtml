<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html">

    <!-- INTERFACE -->
    <cc:interface>
        <cc:attribute name="controller" type="java.lang.Object"/>
        <cc:attribute name="locateUnlock" />
        <cc:attribute name="update" />
        <cc:attribute name="position"  />
        <cc:attribute name="widgetVar"  />


    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>
        
        
         <div class="col s1">
                                            <p:commandButton  
                                                action="#{cc.attrs.controller.unlockServices.openUnlock()}" 
                                                rendered="#{cc.attrs.controller.unlockServices.lock.get(cc.attrs.position)}"
                                                icon="pi pi-lock-open"
                                                title="#{app['button.unlock']}"
                                                process="@this" 
                                                update="#{cc.attrs.locateUnlock}" 
                                                oncomplete="PF('#{cc.attrs.widgetVar}').initPosition(); PF('#{cc.attrs.widgetVar}').show()"
                                                styleClass="rounded-button ui-button-danger" style="margin-right: .5rem"/>




                                        </div>
                                        <div class="col s1">
                                            <p:commandButton 
                                              action="#{cc.attrs.controller.unlockServices.closePadlock(cc.attrs.position)}" 
                                                rendered="#{!cc.attrs.controller.unlockServices.lock.get(cc.attrs.position)}"
                                                title="#{app['button.lock']}"
                                                icon="pi pi-lock"
                                                process="@this" 
                                                update="#{cc.attrs.update}" 
                                               styleClass="rounded-button ui-button-help" style="margin-right: .5rem"/>




                                        </div>
        
        
        

        <h:panelGroup id="panelGroupUnlock">
            <p:dialog header="#{app['form.unlock']}"  showEffect="fade"
                      modal="true"
                      dynamic="true"

                      widgetVar="#{cc.attrs.widgetVar}" responsive="true"
                      width="60%"
                      style="width:20%;margin:0 auto"
                      position="center center" onShow="PF('#{cc.attrs.widgetVar}').initPosition()"
                      resizable="false"
                      >
                <p:outputPanel id="outputPanelUnlock" class="ui-fluid">

                    <p:outputPanel >
                        <div class="row" >
                            <div class="col s2">
                                <p:outputLabel value="#{msg['field.username']}"/>
                            </div>
                            <div class="col s5">
                                <p:inputText value="#{cc.attrs.controller.unlockServices.usernameForUnlock}" id="usernameForUnLock"/>
                            </div>
                        </div>
                        <div class="row" >
                            <div class="col s2">
                                <p:outputLabel value="#{msg['field.password']}"/>
                            </div>
                            <div class="col s5">
                                <p:password value="#{cc.attrs.controller.unlockServices.passwordForUnlock}" id="passwordForUnLock"/>
                            </div>
                        </div>

                        <div class="col s4">
                            <p:commandButton value="#{app['button.login']}"  
                                             styleClass="edit-button rounded-button ui-button-success" 
                                             style="width:100%; background-color: #6b0392;"
                                             action="#{cc.attrs.controller.unlockServices.unlock(cc.attrs.position, cc.attrs.widgetVar,cc.attrs.update)}" 
                                             update="#{cc.attrs.update}"

                                             />
                        </div>

                    </p:outputPanel>
                </p:outputPanel>
            </p:dialog>
        </h:panelGroup>
    </cc:implementation>
</html>